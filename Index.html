<!doctype html>
<html lang="en">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>BLL Tier Calculator</title>
<style>
:root{--bg:#0b1220;--card:#111827;--t:#e5e7eb;--m:#9ca3af;--b:#1f2937;--a:#38bdf8}
*{box-sizing:border-box}body{margin:0;background:var(--bg);color:var(--t);font:14px/1.35 system-ui,-apple-system,Segoe UI,Roboto;padding:16px}
.wrap{max-width:860px;margin:auto;display:grid;gap:14px;grid-template-columns:1.15fr .85fr}
@media(max-width:860px){.wrap{grid-template-columns:1fr}}
.card{background:var(--card);border:1px solid var(--b);border-radius:16px;padding:16px}
h1,h2{margin:0 0 6px}h1{font-size:18px}h2{font-size:14px;color:var(--m);font-weight:700}
small{color:var(--m)}
.grid{display:grid;gap:10px;grid-template-columns:1fr 1fr}
@media(max-width:520px){.grid{grid-template-columns:1fr}}
label{display:block;color:var(--m);font-size:12px;margin:0 0 6px}
input,select{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--b);background:#0a1020;color:var(--t);outline:none}
.badge{display:inline-flex;align-items:center;gap:8px;padding:6px 10px;border-radius:999px;border:1px solid var(--b);background:#0a1020;font-weight:800}
.dot{width:10px;height:10px;border-radius:999px;background:var(--a)}
.kvs{display:grid;gap:10px;grid-template-columns:1fr 1fr;margin-top:10px}
.kv{border:1px solid var(--b);border-radius:12px;padding:10px;background:#0a1020}
.k{color:var(--m);font-size:11px} .v{font-weight:900;font-size:15px;margin-top:2px}
.warn{margin-top:10px;color:#fbbf24;font-size:12px}
.na{color:#f87171;font-weight:900}
hr{border:0;border-top:1px solid var(--b);margin:12px 0}
</style>

<div class="wrap">
  <div class="card">
    <h1>BLL Tier Calculator</h1>
    <small>Live update • age-aware • conservative calories</small>

    <div class="grid" style="margin-top:12px">
      <div>
        <label>Height</label>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px">
          <input id="ft" inputmode="numeric" placeholder="Feet">
          <input id="inch" inputmode="numeric" placeholder="Inches">
        </div>
      </div>
      <div>
        <label>Weight (lbs)</label>
        <input id="wt" inputmode="numeric" placeholder="e.g. 220">
      </div>

      <div>
        <label>Age</label>
        <input id="age" inputmode="numeric" placeholder="e.g. 35">
      </div>
      <div>
        <label>Average daily steps</label>
        <input id="steps" inputmode="numeric" placeholder="e.g. 6000">
      </div>

      <div>
        <label>Training consistency</label>
        <select id="cond">
          <option value="0">None / restarting</option>
          <option value="1">1–2x per week</option>
          <option value="2">3–4x per week</option>
          <option value="3">5x+ per week</option>
        </select>
      </div>
      <div>
        <label>Can you walk 10 minutes without pain?</label>
        <select id="pain">
          <option value="yes">Yes</option>
          <option value="no">No</option>
        </select>
      </div>

      <div>
        <label>Joint issues?</label>
        <select id="joints">
          <option value="no">No</option>
          <option value="yes">Yes</option>
        </select>
      </div>
    </div>

    <div id="out" style="margin-top:14px;display:none">
      <div class="badge"><span class="dot"></span><span id="tierTxt">BLL Tier —</span></div>
      <div style="margin-top:10px" id="blurb"><small>Enter height, weight, and age.</small></div>

      <div class="kvs">
        <div class="kv"><div class="k">Maintenance (base)</div><div class="v" id="maint">—</div></div>
        <div class="kv"><div class="k">Protein target</div><div class="v" id="prot">—</div></div>
        <div class="kv"><div class="k">Safe deficit</div><div class="v" id="safe">—</div></div>
        <div class="kv"><div class="k">Large deficit</div><div class="v" id="large">—</div></div>
        <div class="kv"><div class="k">Muscle-build surplus</div><div class="v" id="surp">—</div></div>
        <div class="kv"><div class="k">Step burn (subtract)</div><div class="v" id="burn">—</div></div>
      </div>

      <div class="warn" id="warn"></div>
      <small style="display:block;margin-top:8px">N/A means intentionally unsafe for that age/bodyweight.</small>
    </div>
  </div>

  <div class="card">
    <h2>Tier Definitions</h2>
    <div style="margin-top:10px">
      <div><b>BLL 1 — Rebuild</b><br><small>Pain/age/bodyweight limits load. Walking, mobility, rehab.</small></div>
      <hr>
      <div><b>BLL 2 — Base Builder</b><br><small>Safe lifting + steady steps. No aggressive deficits.</small></div>
      <hr>
      <div><b>BLL 3 — Capacity</b><br><small>Moderate lifting and conditioning with recovery respected.</small></div>
      <hr>
      <div><b>BLL 4 — Athletic</b><br><small>Heavy lifting + intervals allowed (when earned).</small></div>
    </div>
    <hr>
    <div class="small">
      <b>Medical & Legal Disclaimer</b><br>
      This tool is educational/informational only and is not medical advice.
      If you are under 18, over 65, pregnant, have chronic illness, or are returning from injury,
      consult a qualified healthcare professional before changing exercise or nutrition.
      Stop if you have pain, dizziness, chest pain, or shortness of breath. Use at your own risk.
    </div>
  </div>
</div>

<script>
const $=id=>document.getElementById(id);
const inputs=["ft","inch","wt","age","steps","cond","pain","joints"].map($);

function n(v){v=Number(v);return Number.isFinite(v)?v:0;}
function na(){return '<span class="na">N/A</span>';}

function calc(){
  const ft=n($("ft").value), inch=n($("inch").value), wt=n($("wt").value), age=n($("age").value), steps=n($("steps").value);
  const height=(ft*12)+inch, pain=$("pain").value, joints=$("joints").value, cond=n($("cond").value);

  const out=$("out");
  out.style.display = (height>0 && wt>0 && age>0) ? "block" : "none";
  if(out.style.display==="none") return;

  const bmi=(wt/(height*height))*703;

  // Base tier from conditioning (1..4)
  let tier=cond+1;

  // Safety caps
  if(pain==="no" || joints==="yes") tier=Math.min(tier,2);

  // Bodyweight/BMI gates
  if(bmi>=40) tier=1;
  else if(bmi>=35) tier=Math.min(tier,2);
  else if(bmi>=30) tier=Math.min(tier,3);

  // Age gates (hard governor)
  if(age<16) tier=1;
  else if(age>=70) tier=Math.max(1,tier-2);
  else if(age>=60) tier=Math.max(1,tier-1);

  tier=Math.min(Math.max(tier,1),4);
  $("tierTxt").textContent = "BLL Tier " + tier;

  const blurbs={
    1:"Foundation tier. Pain-free movement, walking, mobility, habit building.",
    2:"Capacity building. Light lifting, steady steps, basic conditioning.",
    3:"Work tier. Moderate lifting + conditioning, controlled progression.",
    4:"Athletic tier. Heavy lifting + intervals allowed (earned, not assumed)."
  };
  $("blurb").innerHTML = "<small>"+blurbs[tier]+"</small>";

  // Calories (universal conservative)
  const maintenance=Math.round(wt*10);
  const burn=Math.round(steps*0.04);

  // Protein + deficit/surplus permissions
  let prot = Math.round(wt*0.8) + " g";
  let safe = (maintenance-300) + " kcal";
  let large = (maintenance-600) + " kcal";
  let surp = (maintenance+300) + " kcal";
  const warnings=[];

  if(age<16){
    prot=na(); safe=na(); large=na(); surp=na();
    warnings.push("Under 16: calorie manipulation disabled (growth phase).");
  }else{
    // Large deficit unsafe at low weight
    if(wt<130){ large=na(); warnings.push("Low bodyweight: large deficit disabled."); }
    // Surplus unsafe at high bodyweight
    if(bmi>=35){ surp=na(); warnings.push("High bodyweight: surplus disabled."); }
    // Elderly: large deficit disabled; and safe deficit reduced
    if(age>=70){ large=na(); safe=(maintenance-200)+" kcal"; warnings.push("70+: large deficit disabled; safe deficit reduced."); }
    else if(age>=60){ large=na(); warnings.push("60–69: large deficit disabled."); }
  }

  $("maint").textContent = maintenance + " kcal";
  $("prot").innerHTML = prot;
  $("safe").innerHTML = safe;
  $("large").innerHTML = large;
  $("surp").innerHTML = surp;
  $("burn").textContent = burn + " kcal";
  $("warn").textContent = warnings.join(" ");
}
inputs.forEach(el=>el.addEventListener("input",calc));
inputs.forEach(el=>el.addEventListener("change",calc));
</script>
</html>
